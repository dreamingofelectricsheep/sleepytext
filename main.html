<html>
<head>
<title>Code editor</title>
<script type="text/javascript">
window.onload = function() {
var body = document.getElementsByTagName('body')[0]

function create_tag() {
	var tag = document.createElement('span')
	tag.className = 'codetag'
	tag.contentEditable = true
	tag.onkeypress = function(e) {
		if(e.keyCode == 32) {
			e.preventDefault()
			var s = e.target.nextSibling;
			if(s == undefined) {
				s = create_tag()
				e.target.parentNode.appendChild(s)
			}
			s.focus()
		}
	}
	tag.onblur = function(e) {
		var tag = e.target
		var t = tag.innerText
		
		if(t.length == 0) {
			tag.parentNode.removeChild(tag)
			return
		}

		if(t == 'struct') {
			tag.classList.add('struct')
			return
		}

		var v = ['int', 'float', 'char']

		for(var i = 0; i < v.length; ++i) {
			if(v[i] == t) {
				tag.classList.add('type')
				return
			}
		}
	}
		
		
	
	return tag
}


window.onkeypress = function(e) {
	if(e.keyCode == 13) {
		e.preventDefault()
		var codeblock = document.createElement('div')
		codeblock.className = 'codeblock'
		var tag = create_tag()
		codeblock.appendChild(tag)
		body.appendChild(codeblock)
		tag.focus()
	}
}


}
</script>
<style type='text/css'>

.codetag {
	font: 1em monospace;
	margin-right: 8px;
}
.codeblock .struct {
	color: blue;
}
.codeblock .type {
	color: blue;
}

</style>
</head>
<body>
</body>
</html>
